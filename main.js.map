{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/components/card.js","webpack://mesto-project-ff/./src/scripts/components/modal.js","webpack://mesto-project-ff/./src/scripts/components/validation.js","webpack://mesto-project-ff/./src/scripts/components/api.js","webpack://mesto-project-ff/./src/scripts/index.js"],"sourcesContent":["function createCard(card, handleDeleteCard, handleLikeCard, handleOpenImageModal, toggleLike) {\n  const cardTemplate = document.querySelector('#card-template').content;\n  const cardElement = cardTemplate.querySelector('.card').cloneNode(true);\n\n  const cardImage = cardElement.querySelector('.card__image');\n  const cardTitle = cardElement.querySelector('.card__title');\n  const deleteButton = cardElement.querySelector('.card__delete-button');\n  const likeButton = cardElement.querySelector('.card__like-button');\n  const likeCount = cardElement.querySelector('.card__like-count');\n\n  cardImage.src = card.link;\n  cardImage.alt = card.name;\n  cardTitle.textContent = card.name;\n  likeCount.textContent = card.likes;\n\n  if (card.isLiked) {\n    likeButton.classList.add('card__like-button_is-active');\n  }\n\n  if (card.owner._id !== card.userId) {\n    deleteButton.remove();\n  } else {\n    deleteButton.addEventListener('click', () => handleDeleteCard(card.cardId, cardElement));\n  }\n\n  likeButton.addEventListener('click', () => handleLikeCard(card.cardId, likeButton, likeCount, toggleLike));\n  cardImage.addEventListener('click', () => handleOpenImageModal(card.name, card.link));\n\n  return cardElement;\n}\n\nfunction deleteCard(card) {\n  card.remove();\n}\n\nfunction likeCard(cardId, likeButton, likeCount, toggleLike) {\n  const isLiked = likeButton.classList.contains('card__like-button_is-active');\n\n  toggleLike(cardId, isLiked)\n    .then(card => {\n      likeButton.classList.toggle('card__like-button_is-active');\n      likeCount.textContent = card.likes.length;\n    })\n    .catch(err => console.error(`Ошибка лайка ${err}`));\n}\n\nexport { createCard, deleteCard, likeCard };\n","function openModal(modalElement) {\n  modalElement.classList.add('popup_is-opened');\n  document.addEventListener('keydown', closeModalEsc);\n}\n\nfunction closeModal(modalElement) {\n  modalElement.classList.remove('popup_is-opened');\n  document.removeEventListener('keydown', closeModalEsc);\n}\n\nfunction closeModalEsc(evt) {\n  if (evt.key === 'Escape') {\n    const modal = document.querySelector('.popup_is-opened');\n    closeModal(modal);\n  }\n}\n\nexport { openModal, closeModal };","function hasInvalidInput(inputList) {\n  return inputList.some(inputElement => !inputElement.validity.valid)\n}\n\nfunction toggleButtonState(inputList, buttonElement, validationConfig) {\n  if (hasInvalidInput(inputList)) {\n    buttonElement.disabled = true;\n    buttonElement.classList.add(validationConfig.inactiveButtonClass);\n  } else {\n    buttonElement.disabled = false;\n    buttonElement.classList.remove(validationConfig.inactiveButtonClass);    \n  }\n}\n\nfunction showInputError(formElement, inputElement, errorMessage, validationConfig) {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n\n  inputElement.classList.add(validationConfig.inputErrorClass);\n  errorElement.classList.add(validationConfig.errorClass);\n  errorElement.textContent = errorMessage;\n}\n\nfunction hideInputError(formElement, inputElement, validationConfig) {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n\n  inputElement.classList.remove(validationConfig.inputErrorClass);\n  errorElement.classList.remove(validationConfig.errorClass);\n  errorElement.textContent = '';\n}\n\nfunction isValid(formElement, inputElement, validationConfig) {\n  inputElement.validity.patternMismatch ?\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage) :\n    inputElement.setCustomValidity('');\n\n  inputElement.validity.valid ? \n    hideInputError(formElement, inputElement, validationConfig) : \n    showInputError(formElement, inputElement, inputElement.validationMessage, validationConfig);\n}\n\nfunction setEventListeners(formElement, validationConfig) {\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\n\n  toggleButtonState(inputList, buttonElement, validationConfig);\n\n  inputList.forEach(inputElement => {\n    inputElement.addEventListener('input', () => {\n      isValid(formElement, inputElement, validationConfig);\n      toggleButtonState(inputList, buttonElement, validationConfig);\n    });\n  });\n}\n\nfunction enableValidation(validationConfig) {\n  const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\n\n  formList.forEach(formElement => {\n    setEventListeners(formElement, validationConfig);\n  });\n}\n\nfunction clearValidation(formElement, validationConfig) {\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\n\n  toggleButtonState(inputList, buttonElement, validationConfig);\n\n  inputList.forEach(inputElement => hideInputError(formElement, inputElement, validationConfig));\n}\n\nexport { enableValidation, clearValidation };","const CONFIG = {\n  baseUrl: 'https://nomoreparties.co/v1/wff-cohort-38',\n  headers: {\n    authorization: 'c214b40d-4321-4dee-b037-8cce0ace453c',\n    'Content-Type': 'application/json'\n  }\n};\n\nconst endpointPaths = {\n  me: '/users/me',\n  avatar: '/users/me/avatar',\n  cards: '/cards',\n  card: (cardId) => `/cards/${cardId}`,\n  cardLike: (cardId) => `/cards/likes/${cardId}`\n};\n\nfunction apiRequest(endpoint, options = {}) {\n  return fetch(`${CONFIG.baseUrl}${endpoint}`, {\n    headers: CONFIG.headers,\n    ...options\n  }).then(handleResponse);\n}\n\nfunction handleResponse(res) {\n  return res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\n}\n\nconst userAPI = {\n  getUser: () => apiRequest(endpointPaths.me),\n\n  updateUser: (name, about) =>\n    apiRequest(endpointPaths.me, {\n      method: 'PATCH',\n      body: JSON.stringify({name, about})\n    }),\n\n  updateAvatar: (avatar) => \n      apiRequest(endpointPaths.avatar, {\n        method: 'PATCH',\n        body: JSON.stringify({ avatar })\n      })\n};\n\nconst cardAPI = {\n  getInitialCards: () => apiRequest(endpointPaths.cards),\n\n  createCard: (name, link) => \n    apiRequest(endpointPaths.cards, {\n        method: 'POST',\n        body: JSON.stringify({ name, link })\n      }),\n\n  deleteCard: (cardId) => \n    apiRequest(endpointPaths.card(cardId), {\n      method: 'DELETE'\n    }),\n\n  toggleLike: (cardId, isLiked) => \n    apiRequest(endpointPaths.cardLike(cardId), {\n      method: isLiked ? 'DELETE' : 'PUT'\n    })\n};\n\nexport { userAPI, cardAPI };","import '../pages/index.css';\nimport { createCard, deleteCard, likeCard } from './components/card.js';\nimport { openModal, closeModal } from './components/modal.js';\nimport { enableValidation, clearValidation } from './components/validation.js';\nimport { userAPI, cardAPI } from './components/api.js';\n\nconst profileTitle = document.querySelector('.profile__title');\nconst profileDescription = document.querySelector('.profile__description');\nconst profileAvatar = document.querySelector('.profile__image');\nlet userId = null;\n\nconst updateAvatarModal = document.querySelector('.popup_type_update-avatar');\nconst updateAvatarForm = updateAvatarModal.querySelector('.popup__form');\nconst updateAvatarInput = updateAvatarForm.querySelector('.popup__input_type_avatar');\nconst updateAvatarFormButton = updateAvatarForm.querySelector('.popup__button');\n\nconst editProfileModal = document.querySelector('.popup_type_edit');\nconst editProfileButton = document.querySelector('.profile__edit-button');\nconst editProfileForm = editProfileModal.querySelector('.popup__form');\nconst profileNameInput = editProfileForm.querySelector('.popup__input_type_name');\nconst profileDescriptionInput = editProfileForm.querySelector('.popup__input_type_description');\nconst profileSubmitButton = editProfileForm.querySelector('.popup__button');\n\nconst addCardModal = document.querySelector('.popup_type_new-card');\nconst addCardButton = document.querySelector('.profile__add-button');\nconst addCardForm = addCardModal.querySelector('.popup__form');\nconst cardNameInput = addCardForm.querySelector('.popup__input_type_card-name');\nconst cardUrlInput = addCardForm.querySelector('.popup__input_type_url');\nconst addCardFormSubmitButton = addCardForm.querySelector('.popup__button');\n\nconst imageModal = document.querySelector('.popup_type_image');\nconst popupImage = imageModal.querySelector('.popup__image');\nconst popupCaption = imageModal.querySelector('.popup__caption');\n\nconst deleteCardModal = document.querySelector('.popup_type_delete-card');\nconst deleteCardForm = deleteCardModal.querySelector('.popup__form');\nlet idCardForDelete = null;\nlet cardElementForDelete = null;\n\nconst cardList = document.querySelector('.places__list');\n\nconst popups = document.querySelectorAll('.popup');\n\nconst validationConfig = {\n  formSelector: '.popup__form',\n  inputSelector: '.popup__input',\n  submitButtonSelector: '.popup__button',\n  inactiveButtonClass: 'popup__button_disabled',\n  inputErrorClass: 'popup__input_type_error',\n  errorClass: 'popup__error_visible'\n};\n\npopups.forEach(popup => {\n  popup.classList.add('popup_is-animated');\n  popup.addEventListener('click', (evt) => {\n    if (evt.target.classList.contains('popup__close') || (evt.currentTarget === evt.target)) {\n      closeModal(popup);\n    }\n  });\n});\n\nPromise.all([userAPI.getUser(), cardAPI.getInitialCards()])\n  .then(([userData, cardsData]) => {\n    profileTitle.textContent = userData.name;\n    profileDescription.textContent = userData.about;\n    profileAvatar.style.backgroundImage = `url(${userData.avatar})`;\n    userId = userData._id;\n\n    cardsData.forEach(card => {\n      const isLiked = card.likes.some(user => user._id === userId);\n\n      cardList.append(renderCard({\n        name: card.name, \n        link: card.link, \n        likes: card.likes.length,\n        owner: card.owner,\n        userId: userId,\n        cardId: card._id,\n        isLiked\n      }));\n    })\n  })\n  .catch(err => {\n    console.error('Ошибка загрузки', err);\n  });\n\nfunction renderLoading(buttonElement, isLoading) {\n  isLoading ? buttonElement.textContent = 'Сохранение...' : buttonElement.textContent = 'Сохранить';\n}\n\nfunction renderCard(card) {\n  return createCard(card, openDeleteCardModal, likeCard, openImageModal, cardAPI.toggleLike);\n}\n\nfunction openDeleteCardModal(cardId, cardElement) {\n  openModal(deleteCardModal);\n\n  idCardForDelete = cardId;\n  cardElementForDelete = cardElement;\n}\n\nfunction handleDeleteCard(evt) {\n  evt.preventDefault();\n\n  cardAPI.deleteCard(idCardForDelete)\n    .then(() => {\n      deleteCard(cardElementForDelete);\n      closeModal(deleteCardModal);\n    })\n    .catch(err => console.error(err));\n}\n\nfunction openImageModal(name, link) {\n  popupImage.src = link;\n  popupImage.alt = name;\n  popupCaption.textContent = name;\n\n  openModal(imageModal);\n}\n\nfunction handleProfileAvatarClick() {\n  openModal(updateAvatarModal);\n  clearValidation(addCardForm, validationConfig);\n  clearValidation(updateAvatarForm, validationConfig);\n}\n\nfunction handleEditProfileButtonClick() {\n  profileNameInput.value = profileTitle.textContent;\n  profileDescriptionInput.value = profileDescription.textContent;\n\n  openModal(editProfileModal);\n  clearValidation(editProfileForm, validationConfig);\n}\n\nfunction handleAddCardButtonClick() {\n  openModal(addCardModal);\n  clearValidation(addCardForm, validationConfig);\n}\n\nfunction handleEditProfileFormSubmit(evt) {\n  evt.preventDefault();\n\n  renderLoading(profileSubmitButton, true);\n\n  userAPI.updateUser(profileNameInput.value, profileDescriptionInput.value)\n    .then(data => {\n      profileTitle.textContent = data.name;\n      profileDescription.textContent = data.about;\n\n      closeModal(editProfileModal);\n      editProfileForm.reset();\n    })\n    .catch(err => console.error('Ошибка обновления профиля.', err))\n    .finally(() => {\n      renderLoading(profileSubmitButton, false);\n    });\n}\n\nfunction handleAddCardFormSubmit(evt) {\n  evt.preventDefault();\n\n  renderLoading(addCardFormSubmitButton, true);\n\n  cardAPI.createCard(cardNameInput.value, cardUrlInput.value)\n    .then(card => {\n      cardList.prepend(renderCard({\n        name: card.name,\n        link: card.link, \n        owner: card.owner,\n        userId: userId,\n        cardId: card._id\n      }))\n\n      closeModal(addCardModal);\n      addCardForm.reset();\n    })\n    .catch(console.error)\n    .finally(() => {\n      renderLoading(addCardFormSubmitButton, false);\n    });\n}\n\nfunction handleUpdateAvatarFormSubmit(evt) {\n  evt.preventDefault();\n\n  renderLoading(updateAvatarFormButton, true);\n\n  userAPI.updateAvatar(updateAvatarInput.value)\n    .then(user => {\n      profileAvatar.style.backgroundImage = `url(${user.avatar})`;\n\n      closeModal(updateAvatarModal);\n      updateAvatarForm.reset();\n    })\n    .catch(err => console.error('Ошибка добавления аватара:', err))\n    .finally(() => {\n      renderLoading(updateAvatarFormButton, false);\n    });\n}\n\nprofileAvatar.addEventListener('click', handleProfileAvatarClick);\neditProfileButton.addEventListener('click', handleEditProfileButtonClick);\naddCardButton.addEventListener('click', handleAddCardButtonClick);\n\neditProfileForm.addEventListener('submit', handleEditProfileFormSubmit);\naddCardForm.addEventListener('submit', handleAddCardFormSubmit);\nupdateAvatarForm.addEventListener('submit', handleUpdateAvatarFormSubmit);\ndeleteCardForm.addEventListener('submit', handleDeleteCard);\n\nenableValidation(validationConfig);"],"names":["likeCard","cardId","likeButton","likeCount","toggleLike","classList","contains","then","card","toggle","textContent","likes","length","catch","err","console","error","concat","openModal","modalElement","add","document","addEventListener","closeModalEsc","closeModal","remove","removeEventListener","evt","key","querySelector","toggleButtonState","inputList","buttonElement","validationConfig","some","inputElement","validity","valid","hasInvalidInput","disabled","inactiveButtonClass","hideInputError","formElement","errorElement","id","inputErrorClass","errorClass","clearValidation","Array","from","querySelectorAll","inputSelector","submitButtonSelector","forEach","CONFIG","baseUrl","headers","authorization","endpointPaths","apiRequest","endpoint","options","arguments","undefined","fetch","_objectSpread","handleResponse","res","ok","json","Promise","reject","status","cardAPI","isLiked","method","profileTitle","profileDescription","profileAvatar","userId","updateAvatarModal","updateAvatarForm","updateAvatarInput","updateAvatarFormButton","editProfileModal","editProfileButton","editProfileForm","profileNameInput","profileDescriptionInput","profileSubmitButton","addCardModal","addCardButton","addCardForm","cardNameInput","cardUrlInput","addCardFormSubmitButton","imageModal","popupImage","popupCaption","deleteCardModal","deleteCardForm","idCardForDelete","cardElementForDelete","cardList","popups","formSelector","renderLoading","isLoading","renderCard","handleDeleteCard","handleLikeCard","handleOpenImageModal","cardElement","content","cloneNode","cardImage","cardTitle","deleteButton","src","link","alt","name","owner","_id","createCard","openDeleteCardModal","openImageModal","popup","target","currentTarget","all","_ref","_ref2","userData","cardsData","about","style","backgroundImage","avatar","user","append","value","preventDefault","body","JSON","stringify","data","reset","finally","prepend","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","isValid","setEventListeners","enableValidation"],"sourceRoot":""}