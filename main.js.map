{"version":3,"file":"main.js","mappings":"mBAmCA,SAASA,EAASC,EAAQC,EAAYC,EAAWC,GAG/CA,EAAWH,EAFKC,EAAWG,UAAUC,SAAS,gCAG3CC,MAAK,SAAAC,GACJN,EAAWG,UAAUI,OAAO,+BAC5BN,EAAUO,YAAcF,EAAKG,MAAMC,MACrC,IACCC,OAAM,SAAAC,GAAG,OAAIC,QAAQC,MAAM,gBAADC,OAAiBH,GAAM,GACtD,CC5CA,SAASI,EAAUC,GACjBA,EAAad,UAAUe,IAAI,mBAC3BC,SAASC,iBAAiB,UAAWC,EACvC,CAEA,SAASC,EAAWL,GAClBA,EAAad,UAAUoB,OAAO,mBAC9BJ,SAASK,oBAAoB,UAAWH,EAC1C,CAEA,SAASA,EAAcI,GACL,WAAZA,EAAIC,KAENJ,EADcH,SAASQ,cAAc,oBAGzC,CCXA,SAASC,EAAkBC,EAAWC,EAAeC,IAJrD,SAAyBF,GACvB,OAAOA,EAAUG,MAAK,SAAAC,GAAY,OAAKA,EAAaC,SAASC,KAAK,GACpE,CAGMC,CAAgBP,IAIlBC,EAAcO,UAAW,EACzBP,EAAc3B,UAAUoB,OAAOQ,EAAiBO,uBAJhDR,EAAcO,UAAW,EACzBP,EAAc3B,UAAUe,IAAIa,EAAiBO,qBAKjD,CAUA,SAASC,EAAeC,EAAaP,EAAcF,GACjD,IAAMU,EAAeD,EAAYb,cAAc,IAADZ,OAAKkB,EAAaS,GAAE,WAElET,EAAa9B,UAAUoB,OAAOQ,EAAiBY,iBAC/CF,EAAatC,UAAUoB,OAAOQ,EAAiBa,YAC/CH,EAAajC,YAAc,EAC7B,CAEA,SAASqC,EAAQL,EAAaP,GAC5BA,EAAaC,SAASY,gBACpBb,EAAac,kBAAkBd,EAAae,QAAQC,cACpDhB,EAAac,kBAAkB,IAEjCd,EAAaC,SAASC,MACpBI,EAAeC,EAAaP,EAAcF,kBAtB9C,SAAwBS,EAAaP,EAAcgB,EAAclB,GAC/D,IAAMU,EAAeD,EAAYb,cAAc,IAADZ,OAAKkB,EAAaS,GAAE,WAElET,EAAa9B,UAAUe,IAAIa,EAAiBY,iBAC5CF,EAAatC,UAAUe,IAAIa,EAAiBa,YAC5CH,EAAajC,YAAcyC,CAC7B,CAiBIC,CAAeV,EAAaP,EAAcA,EAAakB,kBAAmBpB,iBAC9E,CAwBA,SAASqB,EAAgBZ,EAAaT,GACpC,IAAMF,EAAYwB,MAAMC,KAAKd,EAAYe,iBAAiBxB,EAAiByB,gBAG3E5B,EAAkBC,EAFIW,EAAYb,cAAcI,EAAiB0B,sBAErB1B,GAE5CF,EAAU6B,SAAQ,SAAAzB,GAAY,OAAIM,EAAeC,EAAaP,EAAa,GAC7E,C,i1BCrEA,IAAM0B,EAAS,CACbC,QAAS,4CACTC,QAAS,CACPC,cAAe,uCACf,eAAgB,qBAIdC,EACA,YADAA,EAGG,SAKT,SAASC,EAAWC,GAAwB,IAAdC,EAAOC,UAAAzD,OAAA,QAAA0D,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EACvC,OAAOE,MAAM,GAADtD,OAAI4C,EAAOC,SAAO7C,OAAGkD,G,+VAAQK,CAAA,CACvCT,QAASF,EAAOE,SACbK,IACF7D,KAAKkE,EACV,CAEA,SAASA,EAAeC,GACtB,OAAOA,EAAIC,GAAKD,EAAIE,OAASC,QAAQC,OAAO,WAAD7D,OAAYyD,EAAIK,QAC7D,CAEA,IAgBMC,EAcQ,SAAC/E,EAAQgF,GAAO,OAC1Bf,EA7CQ,SAACjE,GAAM,sBAAAgB,OAAqBhB,EAAM,CA6C/BgE,CAAuBhE,GAAS,CACzCiF,OAAQD,EAAU,SAAW,OAC7B,E,sGCtDN,IAAME,EAAe9D,SAASQ,cAAc,mBACtCuD,EAAqB/D,SAASQ,cAAc,yBAC5CwD,EAAgBhE,SAASQ,cAAc,mBACzCyD,EAAS,KAEPC,EAAoBlE,SAASQ,cAAc,6BAC3C2D,EAAmBD,EAAkB1D,cAAc,gBACnD4D,EAAoBD,EAAiB3D,cAAc,6BACnD6D,EAAyBF,EAAiB3D,cAAc,kBAExD8D,EAAmBtE,SAASQ,cAAc,oBAC1C+D,EAAoBvE,SAASQ,cAAc,yBAC3CgE,EAAkBF,EAAiB9D,cAAc,gBACjDiE,EAAmBD,EAAgBhE,cAAc,2BACjDkE,EAA0BF,EAAgBhE,cAAc,kCACxDmE,EAAsBH,EAAgBhE,cAAc,kBAEpDoE,EAAe5E,SAASQ,cAAc,wBACtCqE,EAAgB7E,SAASQ,cAAc,wBACvCsE,EAAcF,EAAapE,cAAc,gBACzCuE,EAAgBD,EAAYtE,cAAc,gCAC1CwE,EAAeF,EAAYtE,cAAc,0BACzCyE,EAA0BH,EAAYtE,cAAc,kBAEpD0E,EAAalF,SAASQ,cAAc,qBACpC2E,EAAaD,EAAW1E,cAAc,iBACtC4E,EAAeF,EAAW1E,cAAc,mBAExC6E,EAAkBrF,SAASQ,cAAc,2BACzC8E,EAAiBD,EAAgB7E,cAAc,gBACjD+E,EAAkB,KAClBC,EAAuB,KAErBC,EAAWzF,SAASQ,cAAc,iBAElCkF,EAAS1F,SAASoC,iBAAiB,UAEnCxB,EAAmB,CACvB+E,aAAc,eACdtD,cAAe,gBACfC,qBAAsB,iBACtBnB,oBAAqB,yBACrBK,gBAAiB,0BACjBC,WAAY,wBAqCd,SAASmE,EAAcjF,EAAekF,GACxBlF,EAActB,YAA1BwG,EAAwC,gBAA8C,WACxF,CAEA,SAASC,EAAW3G,GAClB,OJ3FF,SAAoBA,EAAM4G,EAAkBC,EAAgBC,EAAsBlH,GAChF,IACMmH,EADelG,SAASQ,cAAc,kBAAkB2F,QAC7B3F,cAAc,SAAS4F,WAAU,GAE5DC,EAAYH,EAAY1F,cAAc,gBACtC8F,EAAYJ,EAAY1F,cAAc,gBACtC+F,EAAeL,EAAY1F,cAAc,wBACzC3B,EAAaqH,EAAY1F,cAAc,sBACvC1B,EAAYoH,EAAY1F,cAAc,qBAoB5C,OAlBA6F,EAAUG,IAAMrH,EAAKsH,KACrBJ,EAAUK,IAAMvH,EAAKwH,KACrBL,EAAUjH,YAAcF,EAAKwH,KAC7B7H,EAAUO,YAAcF,EAAKG,MAEzBH,EAAKyE,SACP/E,EAAWG,UAAUe,IAAI,+BAGvBZ,EAAKyH,MAAMC,MAAQ1H,EAAK8E,OAC1BsC,EAAanG,SAEbmG,EAAatG,iBAAiB,SAAS,kBAAM8F,EAAiB5G,EAAKP,OAAQsH,EAAY,IAGzFrH,EAAWoB,iBAAiB,SAAS,kBAAM+F,EAAe7G,EAAKP,OAAQC,EAAYC,EAAWC,EAAW,IACzGsH,EAAUpG,iBAAiB,SAAS,kBAAMgG,EAAqB9G,EAAKwH,KAAMxH,EAAKsH,KAAK,IAE7EP,CACT,CI8DSY,CAAW3H,EAAM4H,EAAqBpI,EAAUqI,EAAgBrD,EACzE,CAEA,SAASoD,EAAoBnI,EAAQsH,GACnCrG,EAAUwF,GAEVE,EAAkB3G,EAClB4G,EAAuBU,CACzB,CAaA,SAASc,EAAeL,EAAMF,GAC5BtB,EAAWqB,IAAMC,EACjBtB,EAAWuB,IAAMC,EACjBvB,EAAa/F,YAAcsH,EAE3B9G,EAAUqF,EACZ,CAlEAQ,EAAOnD,SAAQ,SAAA0E,GACbA,EAAMjI,UAAUe,IAAI,qBACpBkH,EAAMhH,iBAAiB,SAAS,SAACK,IAC3BA,EAAI4G,OAAOlI,UAAUC,SAAS,iBAAoBqB,EAAI6G,gBAAkB7G,EAAI4G,SAC9E/G,EAAW8G,EAEf,GACF,IAEAzD,QAAQ4D,IAAI,CDjCKvE,EAAWD,GAgBHC,EAAWD,KCkBjC1D,MAAK,SAAAmI,GAA2B,I,IAAAC,G,EAAA,E,4CAAAD,I,s1BAAzBE,EAAQD,EAAA,GAAEE,EAASF,EAAA,GACzBxD,EAAazE,YAAckI,EAASZ,KACpC5C,EAAmB1E,YAAckI,EAASE,MAC1CzD,EAAc0D,MAAMC,gBAAkB,OAAH/H,OAAU2H,EAASK,OAAM,KAC5D3D,EAASsD,EAASV,IAElBW,EAAUjF,SAAQ,SAAApD,GAChB,IAAMyE,EAAUzE,EAAKG,MAAMuB,MAAK,SAAAgH,GAAI,OAAIA,EAAKhB,MAAQ5C,CAAM,IAE3DwB,EAASqC,OAAOhC,EAAW,CACzBa,KAAMxH,EAAKwH,KACXF,KAAMtH,EAAKsH,KACXnH,MAAOH,EAAKG,MAAMC,OAClBqH,MAAOzH,EAAKyH,MACZ3C,OAAQA,EACRrF,OAAQO,EAAK0H,IACbjD,QAAAA,IAEJ,GACF,IACCpE,OAAM,SAAAC,GACLC,QAAQC,MAAM,kBAAmBF,EACnC,IAoHFuE,EAAc/D,iBAAiB,SAhF/B,WACEJ,EAAUqE,GACVjC,EAAgB6C,EAAalE,GAC7BqB,EAAgBkC,EAAkBvD,EACpC,IA6EA2D,EAAkBtE,iBAAiB,SA3EnC,WACEwE,EAAiBsD,MAAQjE,EAAazE,YACtCqF,EAAwBqD,MAAQhE,EAAmB1E,YAEnDQ,EAAUyE,GACVrC,EAAgBuC,EAAiB5D,EACnC,IAsEAiE,EAAc5E,iBAAiB,SApE/B,WACEJ,EAAU+E,GACV3C,EAAgB6C,EAAalE,EAC/B,IAmEA4D,EAAgBvE,iBAAiB,UAjEjC,SAAqCK,GD7GvB,IAACqG,EAAMc,EC8GnBnH,EAAI0H,iBAEJpC,EAAcjB,GAAqB,IDhHtBgC,ECkHMlC,EAAiBsD,MDlHjBN,ECkHwB/C,EAAwBqD,MDjHjElF,EAAWD,EAAkB,CAC3BiB,OAAQ,QACRoE,KAAMC,KAAKC,UAAU,CAACxB,KAAAA,EAAMc,MAAAA,OCgH7BvI,MAAK,SAAAkJ,GACJtE,EAAazE,YAAc+I,EAAKzB,KAChC5C,EAAmB1E,YAAc+I,EAAKX,MAEtCtH,EAAWmE,GACXE,EAAgB6D,OAClB,IACC7I,OAAM,SAAAC,GAAG,OAAIC,QAAQC,MAAM,6BAA8BF,EAAI,IAC7D6I,SAAQ,WACP1C,EAAcjB,GAAqB,EACrC,GACJ,IAiDAG,EAAY7E,iBAAiB,UA/C7B,SAAiCK,GDhHnB,IAACqG,EAAMF,ECiHnBnG,EAAI0H,iBAEJpC,EAAcX,GAAyB,IDnH1B0B,ECqHM5B,EAAcgD,MDrHdtB,ECqHqBzB,EAAa+C,MDpHnDlF,EAAWD,EAAqB,CAC5BiB,OAAQ,OACRoE,KAAMC,KAAKC,UAAU,CAAExB,KAAAA,EAAMF,KAAAA,OCmHhCvH,MAAK,SAAAC,GACJsG,EAAS8C,QAAQzC,EAAW,CAC1Ba,KAAMxH,EAAKwH,KACXF,KAAMtH,EAAKsH,KACXG,MAAOzH,EAAKyH,MACZ3C,OAAQA,EACRrF,OAAQO,EAAK0H,OAGf1G,EAAWyE,GACXE,EAAYuD,OACd,IACC7I,MAAME,QAAQC,OACd2I,SAAQ,WACP1C,EAAcX,GAAyB,EACzC,GACJ,IA0BAd,EAAiBlE,iBAAiB,UAxBlC,SAAsCK,GDlJtB,IAACsH,ECmJftH,EAAI0H,iBAEJpC,EAAcvB,GAAwB,IDrJvBuD,ECuJMxD,EAAkB2D,MDtJnClF,EA3BI,mBA2B6B,CAC/BgB,OAAQ,QACRoE,KAAMC,KAAKC,UAAU,CAAEP,OAAAA,OCqJ1B1I,MAAK,SAAA2I,GACJ7D,EAAc0D,MAAMC,gBAAkB,OAAH/H,OAAUiI,EAAKD,OAAM,KAExDzH,EAAW+D,GACXC,EAAiBkE,OACnB,IACC7I,OAAM,SAAAC,GAAG,OAAIC,QAAQC,MAAM,6BAA8BF,EAAI,IAC7D6I,SAAQ,WACP1C,EAAcvB,GAAwB,EACxC,GACJ,IASAiB,EAAerF,iBAAiB,UA1GhC,SAA0BK,GDjDZ,IAAC1B,ECkDb0B,EAAI0H,kBDlDSpJ,ECoDM2G,EDnDjB1C,EAzCI,SAACjE,GAAM,gBAAAgB,OAAehB,EAAM,CAyCrBgE,CAAmBhE,GAAS,CACrCiF,OAAQ,YCmDT3E,MAAK,WACOsG,EJ1EVpF,SI2EDD,EAAWkF,EACb,IACC7F,OAAM,SAAAC,GAAG,OAAIC,QAAQC,MAAMF,EAAI,GACpC,IFxDA,SAA0BmB,GACPsB,MAAMC,KAAKnC,SAASoC,iBAAiBxB,EAAiB+E,eAE9DpD,SAAQ,SAAAlB,IAjBnB,SAA2BA,EAAaT,GACtC,IAAMF,EAAYwB,MAAMC,KAAKd,EAAYe,iBAAiBxB,EAAiByB,gBACrE1B,EAAgBU,EAAYb,cAAcI,EAAiB0B,sBAEjE7B,EAAkBC,EAAWC,EAAeC,GAE5CF,EAAU6B,SAAQ,SAAAzB,GAChBA,EAAab,iBAAiB,SAAS,WACrCyB,EAAQL,EAAaP,GACrBL,EAAkBC,EAAWC,EAAeC,EAC9C,GACF,GACF,CAMI4H,CAAkBnH,EAAaT,EACjC,GACF,CEqJA6H,CAAiB7H,E","sources":["webpack://mesto-project-ff/./src/scripts/components/card.js","webpack://mesto-project-ff/./src/scripts/components/modal.js","webpack://mesto-project-ff/./src/scripts/components/validation.js","webpack://mesto-project-ff/./src/scripts/components/api.js","webpack://mesto-project-ff/./src/scripts/index.js"],"sourcesContent":["function createCard(card, handleDeleteCard, handleLikeCard, handleOpenImageModal, toggleLike) {\n  const cardTemplate = document.querySelector('#card-template').content;\n  const cardElement = cardTemplate.querySelector('.card').cloneNode(true);\n\n  const cardImage = cardElement.querySelector('.card__image');\n  const cardTitle = cardElement.querySelector('.card__title');\n  const deleteButton = cardElement.querySelector('.card__delete-button');\n  const likeButton = cardElement.querySelector('.card__like-button');\n  const likeCount = cardElement.querySelector('.card__like-count');\n\n  cardImage.src = card.link;\n  cardImage.alt = card.name;\n  cardTitle.textContent = card.name;\n  likeCount.textContent = card.likes;\n\n  if (card.isLiked) {\n    likeButton.classList.add('card__like-button_is-active');\n  }\n\n  if (card.owner._id !== card.userId) {\n    deleteButton.remove();\n  } else {\n    deleteButton.addEventListener('click', () => handleDeleteCard(card.cardId, cardElement));\n  }\n\n  likeButton.addEventListener('click', () => handleLikeCard(card.cardId, likeButton, likeCount, toggleLike));\n  cardImage.addEventListener('click', () => handleOpenImageModal(card.name, card.link));\n\n  return cardElement;\n}\n\nfunction deleteCard(card) {\n  card.remove();\n}\n\nfunction likeCard(cardId, likeButton, likeCount, toggleLike) {\n  const isLiked = likeButton.classList.contains('card__like-button_is-active');\n\n  toggleLike(cardId, isLiked)\n    .then(card => {\n      likeButton.classList.toggle('card__like-button_is-active');\n      likeCount.textContent = card.likes.length;\n    })\n    .catch(err => console.error(`Ошибка лайка ${err}`));\n}\n\nexport { createCard, deleteCard, likeCard };\n","function openModal(modalElement) {\n  modalElement.classList.add('popup_is-opened');\n  document.addEventListener('keydown', closeModalEsc);\n}\n\nfunction closeModal(modalElement) {\n  modalElement.classList.remove('popup_is-opened');\n  document.removeEventListener('keydown', closeModalEsc);\n}\n\nfunction closeModalEsc(evt) {\n  if (evt.key === 'Escape') {\n    const modal = document.querySelector('.popup_is-opened');\n    closeModal(modal);\n  }\n}\n\nexport { openModal, closeModal };","function hasInvalidInput(inputList) {\n  return inputList.some(inputElement => !inputElement.validity.valid)\n}\n\nfunction toggleButtonState(inputList, buttonElement, validationConfig) {\n  if (hasInvalidInput(inputList)) {\n    buttonElement.disabled = true;\n    buttonElement.classList.add(validationConfig.inactiveButtonClass);\n  } else {\n    buttonElement.disabled = false;\n    buttonElement.classList.remove(validationConfig.inactiveButtonClass);    \n  }\n}\n\nfunction showInputError(formElement, inputElement, errorMessage, validationConfig) {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n\n  inputElement.classList.add(validationConfig.inputErrorClass);\n  errorElement.classList.add(validationConfig.errorClass);\n  errorElement.textContent = errorMessage;\n}\n\nfunction hideInputError(formElement, inputElement, validationConfig) {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n\n  inputElement.classList.remove(validationConfig.inputErrorClass);\n  errorElement.classList.remove(validationConfig.errorClass);\n  errorElement.textContent = '';\n}\n\nfunction isValid(formElement, inputElement) {\n  inputElement.validity.patternMismatch ?\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage) :\n    inputElement.setCustomValidity('');\n\n  inputElement.validity.valid ? \n    hideInputError(formElement, inputElement, validationConfig) : \n    showInputError(formElement, inputElement, inputElement.validationMessage, validationConfig);\n}\n\nfunction setEventListeners(formElement, validationConfig) {\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\n\n  toggleButtonState(inputList, buttonElement, validationConfig);\n\n  inputList.forEach(inputElement => {\n    inputElement.addEventListener('input', () => {\n      isValid(formElement, inputElement);\n      toggleButtonState(inputList, buttonElement, validationConfig);\n    });\n  });\n}\n\nfunction enableValidation(validationConfig) {\n  const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\n\n  formList.forEach(formElement => {\n    setEventListeners(formElement, validationConfig);\n  });\n}\n\nfunction clearValidation(formElement, validationConfig) {\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\n\n  toggleButtonState(inputList, buttonElement, validationConfig);\n\n  inputList.forEach(inputElement => hideInputError(formElement, inputElement));\n}\n\nexport { enableValidation, clearValidation };","const CONFIG = {\n  baseUrl: 'https://nomoreparties.co/v1/wff-cohort-38',\n  headers: {\n    authorization: 'c214b40d-4321-4dee-b037-8cce0ace453c',\n    'Content-Type': 'application/json'\n  }\n};\n\nconst endpointPaths = {\n  me: '/users/me',\n  avatar: '/users/me/avatar',\n  cards: '/cards',\n  card: (cardId) => `/cards/${cardId}`,\n  cardLike: (cardId) => `/cards/likes/${cardId}`\n};\n\nfunction apiRequest(endpoint, options = {}) {\n  return fetch(`${CONFIG.baseUrl}${endpoint}`, {\n    headers: CONFIG.headers,\n    ...options\n  }).then(handleResponse);\n}\n\nfunction handleResponse(res) {\n  return res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\n}\n\nconst userAPI = {\n  getUser: () => apiRequest(endpointPaths.me),\n\n  updateUser: (name, about) =>\n    apiRequest(endpointPaths.me, {\n      method: 'PATCH',\n      body: JSON.stringify({name, about})\n    }),\n\n  updateAvatar: (avatar) => \n      apiRequest(endpointPaths.avatar, {\n        method: 'PATCH',\n        body: JSON.stringify({ avatar })\n      })\n};\n\nconst cardAPI = {\n  getInitialCards: () => apiRequest(endpointPaths.cards),\n\n  createCard: (name, link) => \n    apiRequest(endpointPaths.cards, {\n        method: 'POST',\n        body: JSON.stringify({ name, link })\n      }),\n\n  deleteCard: (cardId) => \n    apiRequest(endpointPaths.card(cardId), {\n      method: 'DELETE'\n    }),\n\n  toggleLike: (cardId, isLiked) => \n    apiRequest(endpointPaths.cardLike(cardId), {\n      method: isLiked ? 'DELETE' : 'PUT'\n    })\n};\n\nexport { userAPI, cardAPI };","import '../pages/index.css';\nimport { createCard, deleteCard, likeCard } from './components/card.js';\nimport { openModal, closeModal } from './components/modal.js';\nimport { enableValidation, clearValidation } from './components/validation.js';\nimport { userAPI, cardAPI } from './components/api.js';\n\nconst profileTitle = document.querySelector('.profile__title');\nconst profileDescription = document.querySelector('.profile__description');\nconst profileAvatar = document.querySelector('.profile__image');\nlet userId = null;\n\nconst updateAvatarModal = document.querySelector('.popup_type_update-avatar');\nconst updateAvatarForm = updateAvatarModal.querySelector('.popup__form');\nconst updateAvatarInput = updateAvatarForm.querySelector('.popup__input_type_avatar');\nconst updateAvatarFormButton = updateAvatarForm.querySelector('.popup__button');\n\nconst editProfileModal = document.querySelector('.popup_type_edit');\nconst editProfileButton = document.querySelector('.profile__edit-button');\nconst editProfileForm = editProfileModal.querySelector('.popup__form');\nconst profileNameInput = editProfileForm.querySelector('.popup__input_type_name');\nconst profileDescriptionInput = editProfileForm.querySelector('.popup__input_type_description');\nconst profileSubmitButton = editProfileForm.querySelector('.popup__button');\n\nconst addCardModal = document.querySelector('.popup_type_new-card');\nconst addCardButton = document.querySelector('.profile__add-button');\nconst addCardForm = addCardModal.querySelector('.popup__form');\nconst cardNameInput = addCardForm.querySelector('.popup__input_type_card-name');\nconst cardUrlInput = addCardForm.querySelector('.popup__input_type_url');\nconst addCardFormSubmitButton = addCardForm.querySelector('.popup__button');\n\nconst imageModal = document.querySelector('.popup_type_image');\nconst popupImage = imageModal.querySelector('.popup__image');\nconst popupCaption = imageModal.querySelector('.popup__caption');\n\nconst deleteCardModal = document.querySelector('.popup_type_delete-card');\nconst deleteCardForm = deleteCardModal.querySelector('.popup__form');\nlet idCardForDelete = null;\nlet cardElementForDelete = null;\n\nconst cardList = document.querySelector('.places__list');\n\nconst popups = document.querySelectorAll('.popup');\n\nconst validationConfig = {\n  formSelector: '.popup__form',\n  inputSelector: '.popup__input',\n  submitButtonSelector: '.popup__button',\n  inactiveButtonClass: 'popup__button_disabled',\n  inputErrorClass: 'popup__input_type_error',\n  errorClass: 'popup__error_visible'\n};\n\npopups.forEach(popup => {\n  popup.classList.add('popup_is-animated');\n  popup.addEventListener('click', (evt) => {\n    if (evt.target.classList.contains('popup__close') || (evt.currentTarget === evt.target)) {\n      closeModal(popup);\n    }\n  });\n});\n\nPromise.all([userAPI.getUser(), cardAPI.getInitialCards()])\n  .then(([userData, cardsData]) => {\n    profileTitle.textContent = userData.name;\n    profileDescription.textContent = userData.about;\n    profileAvatar.style.backgroundImage = `url(${userData.avatar})`;\n    userId = userData._id;\n\n    cardsData.forEach(card => {\n      const isLiked = card.likes.some(user => user._id === userId);\n\n      cardList.append(renderCard({\n        name: card.name, \n        link: card.link, \n        likes: card.likes.length,\n        owner: card.owner,\n        userId: userId,\n        cardId: card._id,\n        isLiked\n      }));\n    })\n  })\n  .catch(err => {\n    console.error('Ошибка загрузки', err);\n  });\n\nfunction renderLoading(buttonElement, isLoading) {\n  isLoading ? buttonElement.textContent = 'Сохранение...' : buttonElement.textContent = 'Сохранить';\n}\n\nfunction renderCard(card) {\n  return createCard(card, openDeleteCardModal, likeCard, openImageModal, cardAPI.toggleLike);\n}\n\nfunction openDeleteCardModal(cardId, cardElement) {\n  openModal(deleteCardModal);\n\n  idCardForDelete = cardId;\n  cardElementForDelete = cardElement;\n}\n\nfunction handleDeleteCard(evt) {\n  evt.preventDefault();\n\n  cardAPI.deleteCard(idCardForDelete)\n    .then(() => {\n      deleteCard(cardElementForDelete);\n      closeModal(deleteCardModal);\n    })\n    .catch(err => console.error(err));\n}\n\nfunction openImageModal(name, link) {\n  popupImage.src = link;\n  popupImage.alt = name;\n  popupCaption.textContent = name;\n\n  openModal(imageModal);\n}\n\nfunction handleProfileAvatarClick() {\n  openModal(updateAvatarModal);\n  clearValidation(addCardForm, validationConfig);\n  clearValidation(updateAvatarForm, validationConfig);\n}\n\nfunction handleEditProfileButtonClick() {\n  profileNameInput.value = profileTitle.textContent;\n  profileDescriptionInput.value = profileDescription.textContent;\n\n  openModal(editProfileModal);\n  clearValidation(editProfileForm, validationConfig);\n}\n\nfunction handleAddCardButtonClick() {\n  openModal(addCardModal);\n  clearValidation(addCardForm, validationConfig);\n}\n\nfunction handleEditProfileFormSubmit(evt) {\n  evt.preventDefault();\n\n  renderLoading(profileSubmitButton, true);\n\n  userAPI.updateUser(profileNameInput.value, profileDescriptionInput.value)\n    .then(data => {\n      profileTitle.textContent = data.name;\n      profileDescription.textContent = data.about;\n\n      closeModal(editProfileModal);\n      editProfileForm.reset();\n    })\n    .catch(err => console.error('Ошибка обновления профиля.', err))\n    .finally(() => {\n      renderLoading(profileSubmitButton, false);\n    });\n}\n\nfunction handleAddCardFormSubmit(evt) {\n  evt.preventDefault();\n\n  renderLoading(addCardFormSubmitButton, true);\n\n  cardAPI.createCard(cardNameInput.value, cardUrlInput.value)\n    .then(card => {\n      cardList.prepend(renderCard({\n        name: card.name,\n        link: card.link, \n        owner: card.owner,\n        userId: userId,\n        cardId: card._id\n      }))\n\n      closeModal(addCardModal);\n      addCardForm.reset();\n    })\n    .catch(console.error)\n    .finally(() => {\n      renderLoading(addCardFormSubmitButton, false);\n    });\n}\n\nfunction handleUpdateAvatarFormSubmit(evt) {\n  evt.preventDefault();\n\n  renderLoading(updateAvatarFormButton, true);\n\n  userAPI.updateAvatar(updateAvatarInput.value)\n    .then(user => {\n      profileAvatar.style.backgroundImage = `url(${user.avatar})`;\n\n      closeModal(updateAvatarModal);\n      updateAvatarForm.reset();\n    })\n    .catch(err => console.error('Ошибка добавления аватара:', err))\n    .finally(() => {\n      renderLoading(updateAvatarFormButton, false);\n    });\n}\n\nprofileAvatar.addEventListener('click', handleProfileAvatarClick);\neditProfileButton.addEventListener('click', handleEditProfileButtonClick);\naddCardButton.addEventListener('click', handleAddCardButtonClick);\n\neditProfileForm.addEventListener('submit', handleEditProfileFormSubmit);\naddCardForm.addEventListener('submit', handleAddCardFormSubmit);\nupdateAvatarForm.addEventListener('submit', handleUpdateAvatarFormSubmit);\ndeleteCardForm.addEventListener('submit', handleDeleteCard);\n\nenableValidation(validationConfig);"],"names":["likeCard","cardId","likeButton","likeCount","toggleLike","classList","contains","then","card","toggle","textContent","likes","length","catch","err","console","error","concat","openModal","modalElement","add","document","addEventListener","closeModalEsc","closeModal","remove","removeEventListener","evt","key","querySelector","toggleButtonState","inputList","buttonElement","validationConfig","some","inputElement","validity","valid","hasInvalidInput","disabled","inactiveButtonClass","hideInputError","formElement","errorElement","id","inputErrorClass","errorClass","isValid","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","clearValidation","Array","from","querySelectorAll","inputSelector","submitButtonSelector","forEach","CONFIG","baseUrl","headers","authorization","endpointPaths","apiRequest","endpoint","options","arguments","undefined","fetch","_objectSpread","handleResponse","res","ok","json","Promise","reject","status","cardAPI","isLiked","method","profileTitle","profileDescription","profileAvatar","userId","updateAvatarModal","updateAvatarForm","updateAvatarInput","updateAvatarFormButton","editProfileModal","editProfileButton","editProfileForm","profileNameInput","profileDescriptionInput","profileSubmitButton","addCardModal","addCardButton","addCardForm","cardNameInput","cardUrlInput","addCardFormSubmitButton","imageModal","popupImage","popupCaption","deleteCardModal","deleteCardForm","idCardForDelete","cardElementForDelete","cardList","popups","formSelector","renderLoading","isLoading","renderCard","handleDeleteCard","handleLikeCard","handleOpenImageModal","cardElement","content","cloneNode","cardImage","cardTitle","deleteButton","src","link","alt","name","owner","_id","createCard","openDeleteCardModal","openImageModal","popup","target","currentTarget","all","_ref","_ref2","userData","cardsData","about","style","backgroundImage","avatar","user","append","value","preventDefault","body","JSON","stringify","data","reset","finally","prepend","setEventListeners","enableValidation"],"sourceRoot":""}